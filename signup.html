<!DOCTYPE html>
<html lang="en-AU">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sign up - AUSWO</title>
<style>
  :root{
    --blue:#2d89a7;
    --bg:#f4f7fb;
    --text:#1a1e24;
    --muted:#6b7a90;
    --card:#ffffff;
    --shadow: 0 2px 8px rgba(0,0,0,.08);
    --shadow-strong: 0 10px 28px rgba(0,0,0,.15);
    --radius:12px;
    --gap:16px;
    --border:#dce1e7;
    --primary:#2d89a7;
    --primary-dark:#25697a;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Microsoft YaHei",sans-serif;
    background: linear-gradient(180deg, #2d89a7 0%, #4fb4d0 100%);
    color:var(--text);
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }

  .topbar{
    background:var(--blue);
    color:#fff;
    height:56px;
    display:flex;
    align-items:center;
    gap:12px;
    padding:0 16px;
    position:relative;
  }
  .burger{
    width:40px;height:40px;border-radius:8px;
    display:grid;place-items:center;cursor:pointer;
  }
  .burger span{
    width:18px;height:2px;background:#fff;display:block;position:relative;
  }
  .burger span::before,.burger span::after{
    content:"";position:absolute;left:0;right:0;height:2px;background:#fff;
  }
  .burger span::before{top:-6px}
  .burger span::after{top:6px}
  .brand{font-weight:600;letter-spacing:.2px}
  .brand2{
    font-weight:600;letter-spacing:.2px;
    position:absolute;left:50%;transform:translateX(-50%);
  }
  .search{
    display:flex;
    align-items:center;
    gap:8px;
    background:#fff;
    border-radius:999px;
    padding:6px 10px;
    height:40px;
    min-width:220px;
    margin-left:auto;
    margin-top:4px;
  }
  .search input{
    border:0;outline:none;width:180px;background:transparent;font-size:14px;
  }
  .account{
    display:flex;align-items:center;gap:8px;
    background:#fff1;border:1px solid #fff3;color:#fff;
    height:40px;padding:0 12px;border-radius:999px;
    text-decoration:none;cursor:pointer;
  }

  .subnav{
    background:var(--blue);
    color:#fff;
    padding:10px 16px 14px;
    box-shadow:var(--shadow);
  }
  .subnav-inner{
    max-width:1200px;margin:0 auto;
    display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:12px;
  }
  .menu-strip{
    display:flex;flex-wrap:wrap;gap:10px;
  }
  .menu-chip{
    background:rgba(255,255,255,.14);
    border:1px solid rgba(255,255,255,.25);
    color:#fff;
    height:40px;padding:0 12px;border-radius:10px;
    display:flex;align-items:center;gap:8px;
    cursor:pointer;
    transition:background .15s ease,border-color .15s ease,box-shadow .2s ease;
  }
  .menu-chip:hover{
    background:rgba(255,255,255,.22);
    border-color:rgba(255,255,255,.45);
    box-shadow:0 2px 10px rgba(0,0,0,.15);
  }

  main{
    flex:1;
    display:grid;
    place-items:center;
    padding:40px 16px;
  }
  .card{
    background:var(--card);
    width:min(420px,100%);
    padding:28px 32px 32px;
    border-radius:var(--radius);
    box-shadow:var(--shadow-strong);
    border:1px solid var(--border);
  }
  .card h1{
    font-size:24px;
    margin-bottom:18px;
    color:var(--blue);
    text-align:center;
  }
  .field{display:flex;margin-bottom:12px;gap:8px}
  .field input{
    flex:1;
    padding:12px 14px;
    border:1px solid var(--border);
    border-radius:8px;
    background:#fff;
    font-size:15px;
    outline:none;
    transition:border-color .2s,box-shadow .2s;
  }
  .field input:focus{
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(45,137,167,.15);
  }
  .field button{
    padding:12px 14px;
    border:none;
    border-radius:8px;
    background:#f1f5f9;
    color:#0f172a;
    font-weight:600;
    cursor:pointer;
  }
  .field button:hover{box-shadow:var(--shadow)}

  .submit{
    width:100%;
    padding:12px;
    background:var(--blue);
    border:none;
    color:#fff;
    font-weight:700;
    border-radius:8px;
    cursor:pointer;
    transition:background .2s,transform .1s;
  }
  .submit:hover{background:var(--primary-dark);transform:translateY(-1px)}

  .footer-bar{
    width:min(420px,100%);
    background:var(--blue);
    margin:20px auto 0;
    padding:10px;
    text-align:center;
    border-radius:10px;
    color:#fff;
  }
  .footer-bar a{
    color:#fff;
    text-decoration:none;
    margin:0 8px;
    font-size:14px;
    font-weight:600;
  }

  .back-login{
    display:inline-block;
    margin-bottom:14px;
    padding:10px 14px;
    border:1px solid var(--border);
    border-radius:8px;
    background:#fff;
    font-weight:700;
    cursor:pointer;
  }
  .back-login:hover{background:#f1f5f9}
  #msg{margin-top:10px;color:#0f172a;font-size:14px}
</style>
</head>
<body>

  <header class="topbar">
    <div class="burger"><span></span></div>
    <div class="brand">AUSWO</div>
    <div class="brand2">User Portal</div>
    <label class="search">
      <input type="search" placeholder="Search" />
    </label>
    <a class="account" href="portal.html">Home</a>
  </header>

  <nav class="subnav">
    <div class="subnav-inner">
      <div class="menu-strip">
        <button class="menu-chip" onclick="location.href='visa_options.html'">Visa Options</button>
        <button class="menu-chip" onclick="location.href='occupation_list.html'">Occupation List</button>
        <button class="menu-chip" onclick="location.href='student_resources.html'">Student Resources</button>
        <button class="menu-chip" onclick="location.href='migration_news.html'">Migration News</button>
        <button class="menu-chip" onclick="location.href='quick_news.html'">Quick News</button>
        <button class="menu-chip" onclick="location.href='dickCalculator.html'">Points Calculator</button>
      </div>
    </div>
  </nav>

  <main>
    <section class="card">
      <button class="back-login" type="button" onclick="location.href='login.html'">Back to Sign in</button>

      <form id="signupForm">
        <h1>Sign up</h1>

        <div class="field">
          <input id="username" type="text" placeholder="Username" required>
        </div>
        <div class="field">
          <input id="age" type="number" min="0" max="120" placeholder="Age">
        </div>
        <div class="field">
          <input id="email" type="email" placeholder="Email Address" required>
        </div>
        <div class="field">
          <input id="password" type="password" placeholder="Password" required>
          <button type="button" onclick="togglePwd('password', this)">show</button>
        </div>
        <div class="field">
          <input id="confirm" type="password" placeholder="Confirm Password" required>
          <button type="button" onclick="togglePwd('confirm', this)">show</button>
        </div>
        <div class="field">
          <input id="phone" type="tel" placeholder="Phone number">
          <button type="button">verify</button>
        </div>
        <div class="field">
          <input id="passcode" type="text" placeholder="Passcode">
        </div>

        <button type="submit" class="submit">Create Account</button>
        <p id="msg"></p>
      </form>
    </section>
  </main>

<script>
(function () {
  const $ = (id) => document.getElementById(id);
  const form = $('signupForm');
  const msg  = $('msg');

  form.addEventListener('submit', async (e) => {
    e.preventDefault(); 
    const username = $('username')?.value?.trim();
    const email    = $('email')?.value?.trim();
    const password = $('password')?.value ?? '';
    const confirm  = $('confirm')?.value ?? '';
    const phone    = $('phone')?.value?.trim() || null;
    const passcode = $('passcode')?.value?.trim() || null;
    const ageRaw   = $('age')?.value?.trim();
    const age      = (ageRaw === '' || ageRaw == null) ? null : Number(ageRaw);

    if (!username || !email || !password) return show('Username, Email and Password are required.');
    if (password !== confirm) return show('Passwords do not match.');
    if (age !== null && (Number.isNaN(age) || age < 0 || age > 120)) return show('Age must be 0–120.');

    try {
      console.log('[signup] sending payload…');
      const res = await fetch('http://localhost:3000/api/signup', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ username, email, password, phone, passcode, age })
      });
      const out = await res.json();
      if (!res.ok) return show('Error: ' + (out.error || res.status));

      show(out.message || ('Account created! user id: ' + out.id));
      form.reset();
    } catch (err) {
      console.error(err);
      show('Network error. Is the server running on :3000?');
    }
  });

  function show(text){ if (msg) msg.textContent = text; else alert(text); }
})();
function togglePwd(id, btn){
  var el = document.getElementById(id);
  if(!el) return;
  el.type = el.type === 'password' ? 'text' : 'password';
  if(btn){ btn.textContent = el.type === 'password' ? 'show' : 'hide'; }
}
</script>

</body>
</html>
