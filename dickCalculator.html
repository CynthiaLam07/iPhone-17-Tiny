<!DOCTYPE html>
<html lang="en-AU">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Visa Options • AUSWO</title>
<style>
  :root{
    --blue:#2d89a7;
    --bg:#f4f7fb;
    --text:#1a1e24;
    --muted:#6b7a90;
    --card:#ffffff;
    --shadow: 0 2px 8px rgba(0,0,0,.08);
    --radius:12px;
    --gap:16px;
    --ring: 0 0 0 3px rgba(45,137,167,.18);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Microsoft YaHei",sans-serif;
    color:var(--text);
    background:var(--bg);
  }

  /* Top*/
  .topbar{
    background:var(--blue); color:#fff; height:56px;
    display:flex; align-items:center; gap:12px; padding:0 16px; position:relative;
  }
  .burger{width:40px;height:40px;border-radius:8px;display:grid;place-items:center;cursor:pointer}
  .burger span{width:18px;height:2px;background:#fff;display:block;position:relative}
  .burger span::before,.burger span::after{content:"";position:absolute;left:0;right:0;height:2px;background:#fff}
  .burger span::before{top:-6px} .burger span::after{top:6px}

  .center-return{
    position:absolute; left:50%; transform:translateX(-50%);
    height:36px; padding:0 14px; border-radius:999px;
    background:#ffffff22; border:1px solid #ffffff44; color:#fff;
    font-weight:700; cursor:pointer;
  }
  .center-return:hover{background:#ffffff33; border-color:#ffffff66}

  .search{margin-left:auto;display:flex;align-items:center;gap:8px;background:#fff;border-radius:999px;padding:6px 10px;height:40px;min-width:220px}
  .search input{border:0;outline:none;width:180px;background:transparent;font-size:14px}
  .account{display:flex;align-items:center;gap:8px;background:#fff1;border:1px solid #fff3;color:#fff;height:40px;padding:0 12px;border-radius:999px}

  .subnav{background:var(--blue);color:#fff;padding:10px 16px 14px;box-shadow:var(--shadow)}
  .subnav-inner{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr;gap:12px}
  .menu-strip{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;}
  .menu-chip{
    background:rgba(255,255,255,.14);
    border:1px solid rgba(255,255,255,.25);
    color:#fff;height:40px;padding:0 12px;border-radius:10px;
    display:flex;align-items:center;gap:8px;cursor:pointer;
    transition: background .15s ease, border-color .15s ease, box-shadow .2s ease;
  }
  .menu-chip:hover{background:rgba(255,255,255,.22);border-color:rgba(255,255,255,.45);box-shadow:0 2px 10px rgba(0,0,0,.15)}
  .menu-chip.is-current{
    background:#fff; color:#0b3f51; border-color:#fff; font-weight:800;
    box-shadow:0 2px 12px rgba(0,0,0,.18);
  }

  .wrap{max-width:1000px;margin:18px auto;padding:0 16px}
  .page-head{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;margin-bottom:12px}
  .page-head h1{margin:0;font-size:22px}
  .page-head p{margin:4px 0 0;color:var(--muted);font-size:14px}

  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
  .form-card{padding:14px}
  .list{display:grid;gap:12px}
  .option{
    display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:start;
    padding:14px;border:1px solid #eef1f5;border-radius:12px;background:#fff;
    transition:box-shadow .15s ease, border-color .15s ease, transform .03s ease;
  }
  .option:hover{box-shadow:var(--shadow)}
  .option:has(input:focus-visible){box-shadow:var(--shadow),var(--ring)}
  .title{font-weight:800;font-size:16px;margin:0 0 4px}
  .desc{color:var(--muted);font-size:14px;line-height:1.55;margin:0}
  .points{align-self:center;white-space:nowrap;background:#ecf5f8;color:#21647b;font-weight:700;padding:6px 10px;border-radius:999px;font-size:13px}

  /* 1 + 1 = 11, hahaha*/
  .radio{
    appearance:none;-webkit-appearance:none;-moz-appearance:none;
    width:22px;height:22px;border-radius:50%;border:2px solid #a8b3c7;margin-top:2px;cursor:pointer;
    display:inline-grid;place-content:center;background:#fff;transition:border-color .15s ease, transform .03s ease;
  }
  .radio:checked{border-color:var(--blue)}
  .radio:checked::after{content:"";width:12px;height:12px;border-radius:50%;background:var(--blue)}
  .option:active .radio{transform:scale(.96)}

  .actions{position:sticky;bottom:0;margin-top:14px;background:transparent;padding:8px 0 2px;display:flex;justify-content:center;gap:10px}
  .btn{height:42px;border-radius:12px;border:1px solid #e6ebf2;background:#f8fafc;padding:0 16px;font-weight:700;color:#2c5f77;cursor:pointer}
  .btn-primary{background:linear-gradient(0deg,#1e6b82,#2d89a7);color:#fff;border:0;box-shadow:var(--shadow)}
  .btn-primary[disabled]{opacity:.5;cursor:not-allowed}

  /* embeded big dick */
  .backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.24);
    display:none; z-index:40;
  }
  .backdrop.show{display:block}
  .modal{
    position:fixed; inset:0; display:none; z-index:41; 
    padding:24px; 
  }
  .modal.show{display:grid; place-items:center}

  .modal-card{
    width:min(900px, calc(100vw - 40px));
    max-height:80vh; overflow:auto;
    background:#fff; border-radius:16px; box-shadow:0 12px 40px rgba(0,0,0,.22);
    padding:18px;
  }

  .modal-head{
    display:flex; align-items:center; gap:12px; margin-bottom:8px;
  }
  .modal-head .back-link{
    appearance:none; background:#f3f7fb; border:1px solid #e6ebf2; color:#2c5f77;
    height:34px; padding:0 12px; border-radius:10px; font-weight:700; cursor:pointer;
  }
  .modal h2{margin:0 0 6px; font-size:18px}
  .section{background:#fff;border:1px solid #eef1f5;border-radius:12px;padding:14px}
  .section + .section{margin-top:14px}
  .section h3{margin:0 0 10px;font-size:16px}
  .blurb{background:#f8fafc;border:1px solid #e6ebf2;border-radius:12px;padding:14px;color:#6b7a90;line-height:1.55;margin-bottom:8px}
  .choice{display:flex;align-items:center;gap:10px;margin:12px 0}
  .choice label{font-size:15px;color:#1a1e24}
  .submit-row{display:flex;justify-content:center;margin-top:14px}

  /* kiss my balls */
  .choice .radio{
    position:absolute;
    width:1px;height:1px;margin:0;padding:0;border:0;
    clip:rect(0 0 0 0); clip-path:inset(50%);
    overflow:hidden; white-space:nowrap;
  }
  .choice label{
    position:relative;
    padding-left:34px;         
    cursor:pointer;
    line-height:1.5;
  }
  .choice .radio + label::before{
    content:"";
    position:absolute; left:0; top:2px;
    width:22px; height:22px;                
    border:2px solid #a8b3c7; border-radius:50%;
    background:#fff; box-sizing:border-box;
  }
  .choice .radio:checked + label::before{border-color:var(--blue);}
  .choice .radio:checked + label::after{
    content:"";
    position:absolute; left:5px; top:7px;    
    width:12px; height:12px; border-radius:50%;
    background:var(--blue);
  }
  .choice .radio:focus-visible + label::before{box-shadow: var(--ring);}

  /* formatting the two windows */
  .modal-wrap{display:block;} 
  .modal.dual .modal-wrap{
    display:flex; gap:16px; align-items:flex-start; justify-content:center;
  }
  /* same size of two cards === */
  .modal.dual .modal-card{
    width:min(520px, calc(50vw - 48px));
    max-height:80vh;
  }

  /* result */
  .summary-table{width:100%; border-collapse:collapse; table-layout:fixed}
  .summary-table th, .summary-table td{
    border:1px solid #1a1e24; padding:10px; vertical-align:top;
  }
  .summary-table thead th{font-size:20px; text-align:center}
  .summary-table tfoot th{font-size:20px; text-align:left}
  .summary-actions{display:flex; justify-content:space-between; gap:12px; margin-top:14px}
</style>
</head>
<body>
  <!-- Topbar -->
  <header class="topbar">
    <div class="burger" aria-label="Open menu"><span></span></div>
    <button class="center-return" type="button" onclick="location.href='portal.html'">
      Go back to user portal
    </button>
    <label class="search" aria-label="Search">
      <input type="search" placeholder="Search" />
    </label>
    <div class="account">Account</div>
  </header>

  <!-- Subnav -->
  <nav class="subnav">
    <div class="subnav-inner">
      <div class="menu-strip">
        <button class="menu-chip" type="button" onclick="location.href='visa_options.html'">Visa Options</button>
        <button class="menu-chip" type="button" onclick="location.href='occupation_list.html'">Occupation List</button>
        <button class="menu-chip" type="button" onclick="location.href='student_resources.html'">Student Resources</button>
        <button class="menu-chip" type="button" onclick="location.href='migration_news.html'">Migration News</button>
        <button class="menu-chip" type="button" onclick="location.href='quick_news.html'">Quick News</button>
        <button class="menu-chip is-current" type="button">Points Calculator</button>
      </div>
    </div>
  </nav>

  <!-- Content -->
  <main class="wrap">
    <div class="page-head">
      <div>
        <h1>Visa Options</h1>
        <p>Select one option to continue. Points are indicative only.</p>
      </div>
    </div>

    <form id="visaForm" class="card form-card" action="#" method="post" aria-labelledby="visaHeading">
      <h2 id="visaHeading" style="margin:4px 6px 12px;font-size:16px;color:#506377;">Select a visa option</h2>

      <div class="list" role="radiogroup" aria-labelledby="visaHeading">
        <!-- 188 cups of shit-->
        <label class="option">
          <input class="radio" type="radio" name="visa_option" value="188" required />
          <div>
            <p class="title">Business Innovation and Investment (Provisional) visa (subclass 188)</p>
            <p class="desc">Provisional visa for business innovation and investment streams.</p>
          </div>
          <div class="points" aria-hidden="true">Points: 0</div>
        </label>

        <!-- 189 blocks of shit-->
        <label class="option">
          <input class="radio" type="radio" name="visa_option" value="189" />
          <div>
            <p class="title">Skilled Independent Visa (Subclass 189)</p>
            <p class="desc">Permanent visa for skilled workers without sponsorship.</p>
          </div>
          <div class="points" aria-hidden="true">Points: 0</div>
        </label>

        <!-- 190 piles of shit-->
        <label class="option">
          <input class="radio" type="radio" name="visa_option" value="190" />
          <div>
            <p class="title">Skilled Nominated Visa (Subclass 190)</p>
            <p class="desc">Permanent visa for skilled workers nominated by a state or territory.</p>
          </div>
          <div class="points" aria-hidden="true">Points: 15</div>
        </label>

        <!-- 489 tons of shit-->
        <label class="option">
          <input class="radio" type="radio" name="visa_option" value="489" />
          <div>
            <p class="title">Skilled Regional (Provisional) visa (subclass 489)</p>
            <p class="desc">Provisional visa for regional skilled migration pathways.</p>
          </div>
          <div class="points" aria-hidden="true">Points: 0</div>
        </label>

        <!-- 491 pieces of shit-->
        <label class="option">
          <input class="radio" type="radio" name="visa_option" value="491" />
          <div>
            <p class="title">Skilled Work Regional (Provisional) Visa (Subclass 491)</p>
            <p class="desc">Provisional visa for skilled workers nominated by a state or sponsored by a family member.</p>
          </div>
          <div class="points" aria-hidden="true">Points: 5</div>
        </label>
      </div>

      <div class="actions">
        <button class="btn" type="button" onclick="history.back()">Back</button>
        <button id="nextBtn" class="btn btn-primary" type="button" disabled>Next</button>
      </div>
    </form>
  </main>

  <!-- embeded large dick -->
  <div id="backdrop" class="backdrop" tabindex="-1" aria-hidden="true"></div>
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="mTitle" aria-hidden="true">
    <div class="modal-wrap" id="modalWrap">
      <!-- left quiz -->
      <div class="modal-card" id="formCard">
        <div class="modal-head">
          <button class="back-link" type="button" id="modalBack">Back</button>
          <h2 id="mTitle">Subclass 188 — Points Calculator</h2>
        </div>

        <!-- Special endorsement -->
        <section class="section">
          <h3>Special endorsement</h3>
          <div class="blurb">
            The nominating State or Territory government agency has determined that
            your proposed business is of unique and important benefit to the State or
            Territory where the nominating government agency is located
          </div>
          <div class="choice">
            <input class="radio" id="endorse_yes" type="radio" name="endorsement" value="yes">
            <label for="endorse_yes">Yes - (Points 10)</label>
          </div>
          <div class="choice">
            <input class="radio" id="endorse_no" type="radio" name="endorsement" value="no">
            <label for="endorse_no">No - (Points 0)</label>
          </div>
        </section>

        <!-- Financial ass -->
        <section class="section">
          <h3>Financial assets</h3>
          <div class="blurb">
            Net business and personal assets of you, your partner or you and your partner combined
            in each of the preceding 2 fiscal years of at least:
          </div>

          <div class="choice">
            <input class="radio" id="asset_125" type="radio" name="assets" value="1.25">
            <label for="asset_125">Not less than AUD1.25 million - (Points 5)</label>
          </div>
          <div class="choice">
            <input class="radio" id="asset_175" type="radio" name="assets" value="1.75">
            <label for="asset_175">Not less than AUD1.75 million - (Points 15)</label>
          </div>
          <div class="choice">
            <input class="radio" id="asset_225" type="radio" name="assets" value="2.25">
            <label for="asset_225">Not less than AUD2.25 million - (Points 25)</label>
          </div>
          <div class="choice">
            <input class="radio" id="asset_275" type="radio" name="assets" value="2.75">
            <label for="asset_275">Not less than AUD2.75 million - (Points 35)</label>
          </div>
          <div class="choice">
            <input class="radio" id="asset_na" type="radio" name="assets" value="0">
            <label for="asset_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <!-- Business turnover -->
        <section class="section">
          <h3>Business turnover</h3>
          <div class="blurb">
            You had an ownership interest in one or more main businesses that had an annual turnover
            in at least 2 of the 4 fiscal years immediately before the time of invitation to apply for the visa
          </div>
          <div class="choice">
            <input class="radio" id="turn_750" type="radio" name="turnover" value="0.75">
            <label for="turn_750">Not less than AUD750,000 - (Points 5)</label>
          </div>
          <div class="choice">
            <input class="radio" id="turn_125" type="radio" name="turnover" value="1.25">
            <label for="turn_125">Not less than AUD1.25 million - (Points 15)</label>
          </div>
          <div class="choice">
            <input class="radio" id="turn_175" type="radio" name="turnover" value="1.75">
            <label for="turn_175">Not less than AUD1.75 million - (Points 25)</label>
          </div>
          <div class="choice">
            <input class="radio" id="turn_225" type="radio" name="turnover" value="2.25">
            <label for="turn_225">Not less than AUD2.25 million - (Points 35)</label>
          </div>
          <div class="choice">
            <input class="radio" id="turn_na" type="radio" name="turnover" value="0">
            <label for="turn_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <!-- Bu -->
        <section class="section">
          <h3>Business Innovation stream only - Business experience</h3>
          <div class="blurb">
            You have held one or more main businesses before you were invited to apply for the visa for
          </div>
          <div class="choice">
            <input class="radio" id="bizexp_4in5" type="radio" name="biz_experience" value="4in5">
            <label for="bizexp_4in5">Not less than 4 years within the preceding 5 years - (Points 10)</label>
          </div>
          <div class="choice">
            <input class="radio" id="bizexp_7in8" type="radio" name="biz_experience" value="7in8">
            <label for="bizexp_7in8">Not less than 7 years within the preceding 8 years - (Points 15)</label>
          </div>
          <div class="choice">
            <input class="radio" id="bizexp_na" type="radio" name="biz_experience" value="0">
            <label for="bizexp_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <!-- Invest a cup of shit -->
        <section class="section">
          <h3>Investor stream only - Investor experience</h3>
          <div class="blurb">
            Immediately before the time of application you held eligible investments of at least AUD250,000 held for
          </div>
          <div class="choice">
            <input class="radio" id="invexp_4" type="radio" name="investor_experience" value="4">
            <label for="invexp_4">Not less than 4 years before the time of invitation to apply for the visa - (Points 10)</label>
          </div>
          <div class="choice">
            <input class="radio" id="invexp_7" type="radio" name="investor_experience" value="7">
            <label for="invexp_7">Not less than 7 years before the time of invitation to apply for the visa - (Points 15)</label>
          </div>
          <div class="choice">
            <input class="radio" id="invexp_na" type="radio" name="investor_experience" value="0">
            <label for="invexp_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <!-- none of my business -->
        <section class="section">
          <h3>Business innovation qualifications</h3>
          <div class="blurb">Select your business qualifications</div>

          <div class="choice">
            <input class="radio" id="qual_patent" type="radio" name="biz_qual" value="patent15">
            <label for="qual_patent">
              Patents or designs registered not less than 1 year before that time and used in the day to day activities of the main business - (Points 15)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_tm" type="radio" name="biz_qual" value="trademark10">
            <label for="qual_tm">
              Trademarks registered not less than 1 year before that time and used in the day to day activities of the main business - (Points 10)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_jv" type="radio" name="biz_qual" value="jv5">
            <label for="qual_jv">
              An ownership in and day to day participation in the management of one or more main business operated under a formal joint venture agreement/s entered into no less than 1 year before the time - (Points 5)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_export" type="radio" name="biz_qual" value="export15">
            <label for="qual_export">
              An ownership interest in a main business/s that derives no less than 50% of its annual turnover from export trade - (Points 15)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_growth" type="radio" name="biz_qual" value="growth10">
            <label for="qual_growth">
              An ownership interest in a main business/s not more than 5 years before had an average annualised growth in turnover &gt; 20% per annum over 3 continuous fiscal years and in at least one of the 3 fiscal years employed 10 or more employees (hours equivalent to 10 full-time employees) - (Points 10)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_grant" type="radio" name="biz_qual" value="grant10">
            <label for="qual_grant">
              An ownership interest in a main business/s that received a grant from a government body in your home country of at least AUD10,000 for early phase start up / product commercialisation / business development / business expansion - (Points 10)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_vc" type="radio" name="biz_qual" value="vc10">
            <label for="qual_vc">
              An ownership interest in a main business/s that received venture capital funding of at least AUD100,000 not more than 4 years before the time of the invitation for the purposes of early phase start up / product commercialisation / business development / business expansion - (Points 10)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="qual_na" type="radio" name="biz_qual" value="0">
            <label for="qual_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <!-- old shit -->
        <section class="section">
          <h3>Age</h3>
          <div class="blurb">Which age band do you fit into?</div>

          <div class="choice">
            <input class="radio" id="age_18_24" type="radio" name="age_band" value="18-24">
            <label for="age_18_24">18-24 years - (Points 20)</label>
          </div>
          <div class="choice">
            <input class="radio" id="age_25_32" type="radio" name="age_band" value="25-32">
            <label for="age_25_32">25-32 years - (Points 30)</label>
          </div>
          <div class="choice">
            <input class="radio" id="age_33_39" type="radio" name="age_band" value="33-39">
            <label for="age_33_39">33-39 years - (Points 25)</label>
          </div>
          <div class="choice">
            <input class="radio" id="age_40_44" type="radio" name="age_band" value="40-44">
            <label for="age_40_44">40-44 years - (Points 20)</label>
          </div>
          <div class="choice">
            <input class="radio" id="age_45_54" type="radio" name="age_band" value="45-54">
            <label for="age_45_54">45-54 years - (Points 15)</label>
          </div>
          <div class="choice">
            <input class="radio" id="age_55p" type="radio" name="age_band" value="55+">
            <label for="age_55p">55 and older - (Points 0)</label>
          </div>
        </section>

        <!-- Woe-->
        <section class="section">
          <h3>English language requirements</h3>
          <div class="blurb">How would you rate your English language ability?</div>

          <div class="choice">
            <input class="radio" id="eng_voc" type="radio" name="eng_level" value="vocational">
            <label for="eng_voc">Vocational English - (Points 5)</label>
          </div>
          <div class="choice">
            <input class="radio" id="eng_prof" type="radio" name="eng_level" value="proficient">
            <label for="eng_prof">Proficient English - (Points 10)</label>
          </div>
          <div class="choice">
            <input class="radio" id="eng_na" type="radio" name="eng_level" value="0">
            <label for="eng_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <!-- Educational Qualifications -->
        <section class="section">
          <h3>Educational Qualifications</h3>
          <div class="blurb">What is your highest qualification?</div>

          <div class="choice">
            <input class="radio" id="edu_5" type="radio" name="education" value="5">
            <label for="edu_5">
              Trade certificate, diploma or bachelor degree by an Australian education institute; or a bachelor qualification recognised by an educational institution of a recognised standard - (Points 5)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="edu_10" type="radio" name="education" value="10">
            <label for="edu_10">
              A Bachelor degree in business, science or technology by an Australian institution; or a bachelor qualification in business, science or technology by an educational institution of a recognised standard - (Points 10)
            </label>
          </div>
          <div class="choice">
            <input class="radio" id="edu_na" type="radio" name="education" value="0">
            <label for="edu_na">Not applicable - (Points 0)</label>
          </div>
        </section>

        <div class="submit-row">
          <button type="button" class="btn btn-primary" id="modalSubmit">Submit</button>
        </div>
      </div>

      <!-- result table which is hidden before submit -->
      <div class="modal-card" id="summaryCard" style="display:none">
        <div class="modal-head">
          <h2>Points Breakdown</h2>
        </div>
        <section class="section">
          <table class="summary-table">
            <thead>
              <tr><th>Subject</th><th>Points</th></tr>
            </thead>
            <tbody id="summaryBody"></tbody>
            <tfoot>
              <tr><th>Total:</th><th id="summaryTotal">0</th></tr>
            </tfoot>
          </table>
          <div class="summary-actions">
            <button class="btn" type="button" id="summaryCancel">Cancel</button>
            <button class="btn btn-primary" type="button" id="summarySave">Save</button>
          </div>
        </section>
      </div>
    </div>
  </div>

<script>
  // fool? 
  const STORAGE_KEY = 'visa188_modal_state_v3';

  const form      = document.getElementById('visaForm');
  const nextBtn   = document.getElementById('nextBtn');
  const modal     = document.getElementById('modal');
  const backdrop  = document.getElementById('backdrop');
  const modalBack = document.getElementById('modalBack');
  const modalSubmit = document.getElementById('modalSubmit');
  const summaryCard  = document.getElementById('summaryCard');
  const summaryBody  = document.getElementById('summaryBody');
  const summaryTotal = document.getElementById('summaryTotal');
  const summaryCancel= document.getElementById('summaryCancel');
  const summarySave  = document.getElementById('summarySave');

  // Next
  form.addEventListener('change', () => {
    const checked = form.querySelector('input[type="radio"][name="visa_option"]:checked');
    nextBtn.disabled = !checked;
  });

  // 188
  nextBtn.addEventListener('click', () => {
    const choice = form.querySelector('input[name="visa_option"]:checked')?.value;
    if (choice === '188') {
      openModal();
    }
  });

  // close the god damn thing
  const closeModal = () => {
    modal.classList.remove('show');
    modal.classList.remove('dual');     /* remove format when cancle */
    summaryCard.style.display = 'none'; /* wai bi ba bu === */
    backdrop.classList.remove('show');
    modal.setAttribute('aria-hidden','true');
    backdrop.setAttribute('aria-hidden','true');
    saveModalState(); // save that mother fuck
  };
  modalBack.addEventListener('click', closeModal);
  backdrop.addEventListener('click', closeModal);

  function openModal(){
    loadModalState();
    setPoints(); 
    modal.classList.add('show');
    backdrop.classList.add('show');
    modal.setAttribute('aria-hidden','false');
    backdrop.setAttribute('aria-hidden','false');
  }

  function saveModalState(){
    const checked = document.querySelectorAll('#formCard input[type="radio"]:checked');
    const data = {};
    checked.forEach(el => { data[el.name] = el.value; });
    try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }catch(e){}
  }
  function loadModalState(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return;
      const data = JSON.parse(raw);
      Object.keys(data).forEach(name=>{
        const el = document.querySelector(`#formCard input[type="radio"][name="${name}"][value="${data[name]}"]`);
        if (el) el.checked = true;
      });
    }catch(e){}
  }

  document.addEventListener('change', (e)=>{
    if (modal.contains(e.target) && e.target.type === 'radio'){
      saveModalState();
    }
  });

  // submit the god damn shit
  modalSubmit.addEventListener('click', () => {
    /* construct table */
    buildSummaryTable();
    modal.classList.add('dual');       // double card
    summaryCard.style.display = 'block';
  });

  // save that fucking shit
  window.addEventListener('beforeunload', saveModalState);

  // setting values
  function setPoints(){
    if(!modal) return;
    const radios = modal.querySelectorAll('input[type="radio"]');
    radios.forEach((input) => {
      const label = modal.querySelector(`label[for="${input.id}"]`);
      let pts = 0;
      if (label) {
        const m = label.textContent.match(/\(Points\s*(\d+)\)/i);
        if (m) pts = parseInt(m[1], 10);
      }
      input.dataset.points = String(pts);
    });
  }

  function sum() {
    const checked = document.querySelectorAll('#formCard input[type="radio"]:checked');
    let total = 0;
    checked.forEach((el) => total += parseInt(el.dataset.points || '0', 10));
    return total;
  }

  /* present result */
  function buildSummaryTable(){
    // clean 
    summaryBody.innerHTML = '';

    // iterate sections
    const sections = document.querySelectorAll('#formCard .section');
    let total = 0;

    sections.forEach((sec) => {
      const subject = (sec.querySelector('h3')?.textContent || '').trim();

      // name collection
      const firstRadio = sec.querySelector('input[type="radio"]');
      if (!firstRadio) return;
      const groupName = firstRadio.name;
      const checked = sec.querySelector(`input[name="${groupName}"]:checked`);

      let pts = 0;
      if (checked) pts = parseInt(checked.dataset.points || '0', 10);
      total += pts;

      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${subject}</td><td>${pts}</td>`;
      summaryBody.appendChild(tr);
    });

    summaryTotal.textContent = total;
  }

  /* bottons under table */
  summaryCancel?.addEventListener('click', () => {
    // close table
    summaryCard.style.display = 'none';
    modal.classList.remove('dual');
  });

  summarySave?.addEventListener('click', () => {
    console.log('Save clicked. (No-op for now)');
  });
</script>
</body>
</html>
